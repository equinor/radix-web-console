:root {

  /* The magic numbers */

  --h-primary-1: calc(206 + var(--h-palette-rotation));
  --h-secondary-1-1: calc(283 + var(--h-palette-rotation));
  --h-secondary-2-1: calc(65 + var(--h-palette-rotation));
  --h-secondary-3-1: calc(60);
  --h-complement-1: calc(34 + var(--h-palette-rotation));
  --h-dark: calc(0 + var(--h-palette-rotation));

  --s-1: 0%;
  --s-2: 11%;
  --s-3: 27%;
  --s-4: 47%;
  --s-5: 81%;
  --s-6: 99%;

  --l-1: 3%;
  --l-2: 13%;
  --l-3: 20%;
  --l-4: 32%;
  --l-5: 47%;
  --l-6: 53%;
  --l-7: 83%;
  --l-8: 93%;
  --l-9: 99%;

  --h-palette-rotation: 0;

  /* --- Base palette extras ------------------------------------------------ */

  --hsl-primary-1: var(--h-primary-1), var(--s-3), var(--l-3);
  --hsl-primary-2: var(--h-primary-1), var(--s-2), var(--l-2);
  --hsl-primary-3: var(--h-primary-1), var(--s-4), var(--l-4);
  --hsl-primary-4: var(--h-primary-1), var(--s-5), var(--l-4);

  --hsl-secondary-1-1: var(--h-secondary-1-1), var(--s-3), var(--l-3);
  --hsl-secondary-1-2: var(--h-secondary-1-1), var(--s-2), var(--l-2);
  --hsl-secondary-1-3: var(--h-secondary-1-1), var(--s-4), var(--l-4);
  --hsl-secondary-1-4: var(--h-secondary-1-1), var(--s-5), var(--l-4);

  --hsl-secondary-2-1: var(--h-secondary-2-1), var(--s-3), var(--l-4);
  --hsl-secondary-2-2: var(--h-secondary-2-1), var(--s-2), var(--l-3);
  --hsl-secondary-2-3: var(--h-secondary-2-1), var(--s-4), var(--l-5);
  --hsl-secondary-2-4: var(--h-secondary-2-1), var(--s-6), var(--l-6);

  --hsl-secondary-3-1: var(--h-secondary-3-1), var(--s-3), var(--l-4);
  --hsl-secondary-3-2: var(--h-secondary-3-1), var(--s-2), var(--l-3);
  --hsl-secondary-3-3: var(--h-secondary-3-1), var(--s-4), var(--l-5);
  --hsl-secondary-3-4: var(--h-secondary-3-1), var(--s-6), var(--l-6);

  --hsl-complement-1: var(--h-complement-1), var(--s-3), var(--l-4);
  --hsl-complement-2: var(--h-complement-1), var(--s-2), var(--l-3);
  --hsl-complement-3: var(--h-complement-1), var(--s-4), var(--l-5);
  --hsl-complement-4: var(--h-complement-1), var(--s-6), var(--l-6);

  --color-primary-1: hsl(var(--hsl-primary-1));
  --color-primary-2: hsl(var(--hsl-primary-2));
  --color-primary-3: hsl(var(--hsl-primary-3));
  --color-primary-4: hsl(var(--hsl-primary-4));

  --color-secondary-1-1: hsl(var(--hsl-secondary-1-1));
  --color-secondary-1-2: hsl(var(--hsl-secondary-1-2));
  --color-secondary-1-3: hsl(var(--hsl-secondary-1-3));
  --color-secondary-1-4: hsl(var(--hsl-secondary-1-4));

  --color-secondary-2-1: hsl(var(--hsl-secondary-2-1));
  --color-secondary-2-2: hsl(var(--hsl-secondary-2-2));
  --color-secondary-2-3: hsl(var(--hsl-secondary-2-3));
  --color-secondary-2-4: hsl(var(--hsl-secondary-2-4));

  --color-secondary-3-1: hsl(var(--hsl-secondary-3-1));
  --color-secondary-3-2: hsl(var(--hsl-secondary-3-2));
  --color-secondary-3-3: hsl(var(--hsl-secondary-3-3));
  --color-secondary-3-4: hsl(var(--hsl-secondary-3-4));

  --color-complement-1: hsl(var(--hsl-complement-1));
  --color-complement-2: hsl(var(--hsl-complement-2));
  --color-complement-3: hsl(var(--hsl-complement-3));
  --color-complement-4: hsl(var(--hsl-complement-4));

  /* --- Palette extras ----------------------------------------------------- */

  --hsl-mood: var(--h-primary-1), var(--s-2), var(--l-8);
  --hsl-mood-darken: var(--h-primary-1), var(--s-2), var(--l-7);
  --hsl-bright: var(--h-primary-1), var(--s-2), var(--l-9);
  --hsl-dark: var(--h-dark), var(--s-1), var(--l-1);

  --color-mood: hsl(var(--hsl-mood));
  --color-mood-darken: hsl(var(--hsl-mood-darken));
  --color-bright: hsl(var(--hsl-bright));
  --color-dark: hsl(var(--hsl-dark));

  /* --- Basic concepts ----------------------------------------------------- */

  /* --color-background: var(--color-mood); */
  --color-background: hsl(0, 0%, 97%);
  --color-content-background: var(--color-bright);
  --color-foreground: var(--color-dark);

  --color-text: var(--color-foreground);

  --color-outline: hsla(var(--hsl-dark), .125);

  /* --- Basic notifications ------------------------------------------------ */

  --color-danger: var(--color-complement-4);
  --color-danger-dark: var(--color-complement-3);
  --color-danger-text: var(--color-primary-2);
  --eds_interactive_danger__highlight: rgba(255, 193, 193, 1);
  --eds_interactive_danger__resting: rgba(235, 0, 0, 1);
  --eds_interactive_danger__hover: rgba(179, 13, 47, 1);
  --eds_interactive_danger__text: rgba(179, 13, 47, 1);

  --color-warning: var(--color-secondary-2-4);
  --color-warning-dark: var(--color-secondary-2-3);
  --color-warning-text: var(--color-secondary-2-2);
  --eds_interactive_warning__highlight: rgba(255, 231, 214, 1);
  --eds_interactive_warning__resting: rgba(255, 146, 0, 1);
  --eds_interactive_warning__hover: rgba(173, 98, 0, 1);
  --eds_interactive_warning__text: rgba(173, 98, 0, 1);

  --color-progress: var(--color-secondary-3-4);
  --color-progress-dark: var(--color-secondary-3-3);
  --color-progress-text: var(--color-secondary-3-2);

  --color-info: var(--color-primary-3);
  --color-info-dark: var(--color-primary-1);
  --color-info-text: var(--color-bright);

  /* --- Interactivity ------------------------------------------------------ */

  --color-interactive-block: var(--color-primary-3);
  --color-interactive-block-focus: var(--color-primary-4);
  --color-interactive-block-text: var(--color-mood);
  --color-interactive-block-text-focus: var(--color-bright);

  --color-interactive-primary: var(--color-primary-4);
  --color-interactive-primary-focus: var(--color-primary-3);
  --color-interactive-primary-text: var(--color-mood);
  --color-interactive-primary-text-focus: var(--color-bright);

  --color-interactive-text: var(--color-primary-3);
  --color-interactive-text-focus: var(--color-primary-4);

  --color-interactive-disabled: var(--color-mood);
  --color-interactive-disabled-text: hsla(var(--hsl-dark), .5);
}

.cluster-type--playground:root {
  --h-palette-rotation: -30;  /* Rotate palette hue by -30 deg */
}

.cluster-type--development:root {
  --h-palette-rotation: 270;  /* Rotate palette hue by 270 deg */
}

@media (prefers-color-scheme: dark) {
  :root {

    /* Reduce saturation, but non-linearly to avoid too much contrast */

    /* --s-1: calc(0% - 0%); */
    --s-2: calc(11% - 5%);
    --s-3: calc(27% - 7%);
    --s-4: calc(47% - 10%);
    --s-5: calc(81% - 20%);
    --s-6: calc(99% - 40%);

    /* Invert the luminance, but non-linearly to avoid too much contrast */

    --l-1: calc(80% - 3%);
    --l-2: calc(80% - 13%);
    --l-3: calc(80% - 20%);
    --l-4: calc(90% - 32%);
    --l-5: calc(90% - 47%);
    --l-6: calc(90% - 53%);
    --l-7: calc(100% - 73%);
    --l-8: calc(100% - 83%);
    --l-9: calc(100% - 89%);
  }
}

